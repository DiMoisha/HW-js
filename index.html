<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Lesson-4</h1>
    <h2>Homework</h2>
    <h3>Dmitrii Karasev</h3>

    <script>
        "use strict;"

        // 1. (это задание делайте по желанию) Написать функцию, преобразующую число в объект. Передавая на 
        // вход число в диапазоне [0, 999],
        // мы должны получить на выходе объект, в котором в соответствующих свойствах описаны разряды числа:
        // - единицы (в свойстве units)
        // - десятки (в свойстве tens)
        // - сотни (в свойстве hundereds)
        // Например, для числа 45 мы должны получить следующий объект:
        // {
        // units: 5, //это единицы
        // tens: 4, //это десятки
        // hundreds: 0, //это сотни
        // }
        // Если число было передано вне [0, 999] диапазона, не целое число или вообще не число,
        // необходимо выдать соответствующее сообщение с помощью console.log и вернуть пустой объект.
        // Вам может пригодиться:
        //  Number.isInteger(value) – функция проверяет, является ли переданное число целым, подробнее здесь 
        // https://mzl.la/2XCVSsx
        //  Math.floor(value) - метод возвращает целое число, которое меньше или равно данному числу (проще 
        // говоря округляет в меньшую сторону), подробнее здесь https://mzl.la/2Qx42SO .
        //  Используйте также остаток от деления на 10, например 123 % 10 будет 3
        //  Вам также может пригодится делить число на 100 и на 10.


        // Решение через функцию
        function TransformNum2Obj(cNumber) {
            let number = +cNumber;
            let obj = {};

            // !(typeof exp === 'number' && exp % 1 === 0)
            if (isNaN(number) || !Number.isInteger(number) || number < 0 || number > 999) {
                console.log("Вы ввели не число, либо число не целое, либо вне диапазона");
            } else {
                let nUnits = number % 10;
                let nTens = (number % 100 - nUnits) / 10;
                let nHundreds = Math.floor(number / 100);

                obj = {
                    units: nUnits,
                    tens: nTens,
                    hundreds: nHundreds
                }
            }

            return obj;
        }

        // Решение через класс ES6
        class Num2Obj {
            constructor(cNumber) {
                const number = +cNumber;

                if (isNaN(number) || !Number.isInteger(number) || number < 0 || number > 999) {
                    console.log("Вы ввели не число, либо число не целое, либо вне диапазона");
                } else {
                    this.units = number % 10;
                    this.tens = (number % 100 - this.units) / 10;
                    this.hundreds = Math.floor(number / 100);
                }
            }
        }

        while (true) {
            let cNumber = prompt("Введите целое число в диапазоне [0, 999]. Для выхода введите: quit");
            if (cNumber == "quit") {
                break;
            } else {
                let numObj = TransformNum2Obj(cNumber); // Вызываем функцию с аргументом введенного числа
                let numObject = new Num2Obj(cNumber);   // Создаем экземпляр класса с аргументом введенного числа
                let x = 1; // Это к делу не относится, нужна для отладки, чтобы просто поставить точку останова
            }
        }
    </script>

    <script>
        // 1.1 (это обязательное задание) Сделайте в стиле es5, а затем в стиле es6 (по аналогии из дополнительных 
        // видео -> 3 примеры наследования -> типы на es5 и es6), конструктор Product, который принимает параметры name
        // и price, сохраните их как свойства объекта. Также объекты типа Product должны иметь метод 
        // make25PercentDiscount, который будет уменьшать цену в объекте на 25%. Имейте в виду, что метод 
        // make25PercentDiscount не должен быть внутри функции-конструктора, и также не нужно создавать отдельный 
        // объект-прототип (как объект transport в уроке).

        
        // ES5
        function Product(name, price) {
            this.name = name;
            this.price = price;
        }

        Product.prototype.make25PercentDiscount = function() {
            this.price *= 0.75;
        }

        const product = new Product("Jacket", 100);
        product.make25PercentDiscount();


        // ES6
        class ProductNew {
            constructor(name, price) {
                this.name = name;
                this.price = price;
            }

            make25PercentDiscount() {
                this.price *= 0.75;
            }
        }

        const productNew = new ProductNew("Toy", 200);
        productNew.make25PercentDiscount();

        let stop = 1;   // Точка останова
    </script>

    <script>
        // 1.2 (это обязательное задание) Сделайте в стиле es5, а затем в стиле es6 (по аналогии из дополнительных 
        // видео -> 3 примеры наследования -> механика наследования), 
        // а) конструктор Post, который принимает параметры author, text, date и сохраняет их как свойства объекта. Объекты 
        // типа Post должны иметь метод edit, который будет принимать текст и записывать его в свойство text объекта.
        // б) конструктор AttachedPost, который принимает параметры author, text, date. Проинициализируйте эти свойства с 
        // помощью конструктора Post, чтобы не дублировать код. Также в конструкторе AttachedPost должно создаваться 
        // свойство highlighted со значением false. Унаследуйте в объектах типа AttachedPost методы из Post.
        // Объекты типа AttachedPost должны иметь метод makeTextHighlighted, который будет назначать свойству 
        // highlighted значение true.

        // ES5
        function Post(author, text, date) {
            this.author = author;
            this.text = text;
            this.date = date;
        }

        Post.prototype.edit = function(newText) {
            this.text = newText;
        }

        function AttachedPost(author, text, date) {
            Post.call(this, author, text, date);
            this.highlighted = false;
        }

        AttachedPost.prototype = Object.create(Post.prototype);
        AttachedPost.prototype.constructor = AttachedPost;

        AttachedPost.prototype.makeTextHighlighted = function() {
            this.highlighted = true;
        }

        let post = new Post("Alex", "Lorem ipsum", "20210615");
        post.edit("LOREM IPSUM");

        let attPost = new AttachedPost("Johny", "Johny Dollor", "20210616");
        attPost.makeTextHighlighted();


        //ES6
        class PostNew {
            constructor(author, text, date) {
                this.author = author;
                this.text = text;
                this.date = date;
            }
            
            edit(newText) {
                this.text = newText;
            }
        }

        class AttachedPostNew extends PostNew {
            constructor(author, text, date) {
                super(author, text, date);
                this.highlighted = false;
            }

            makeTextHighlighted() {
                this.highlighted = true;
            }
        }

        let postNew = new PostNew("Alex", "Lorem ipsum", "20210615");
        postNew.edit("LOREM IPSUM");

        let attPostNew = new AttachedPostNew("Johny", "Johny Dollor", "20210616");
        attPostNew.makeTextHighlighted();

        stop = 1;   // Точка останова
    </script>

</body>

</html>